# Tokens and multi-currency support

This tutorial explains how =nil; handles tokens and multi-currency operations.

## Definition

=nil; supplies a basic 'default' currency that is distributed by the `Faucet` contract. 

The network also has a multi-currency mechanism. All accounts (smart contracts) can be paid in any number of arbitrary currencies created either by the account owner or other accounts. Currency creation is dedicated to a special precompiled contract (`Minter`), and anyone can request the creation, minting, and withdrawal of new currencies. 

:::info

While custom currencies can be transferred between accounts, they cannot be used for paying for essential functionalities of =nil; such as deploying contracts or sending async calls.

:::

:::info

When a currency is created, it is assigned an ID derived from the address of the currency owner. A contract can only be the owner of one currency. While non-owners can transfer different currencies between accounts, they cannot mint any currencies that they do not own.

:::

## Usage

### Via the CLI

To create a new currency and immediately withdraw it to the address of the owner:

```bash file=../../../tests/tokens-multi-currency-support.test.mjs start=First end=Second
```

To create a currency and mint it:

```bash file=../../../tests/tokens-multi-currency-support.test.mjs start=Third end=Fourth
```

To send an existing currency (with some amount already minted) from a minter to another contract:

```bash file=../../../tests/tokens-multi-currency-support.test.mjs start=Fifth end=Sixth
```

### Via the client library

:::tip

To get the ID of a currency, simply call the `hexToBigInt()` function on the owner's address.

:::

To create a new currency and withdraw it:

```ts file=../../../tests/tokens-multi-currency-support.test.mjs start=Seventh end=Eigth
```

To mint a currency and withdraw it:

```ts file=../../../tests/tokens-multi-currency-support.test.mjs start=Ninth end=Tenth
```


## Example

This example creates a wallet that stores three currencies: the default token, and two custom currencies.

### Via the CLI

Create two new wallets (Wallet 1 and Wallet 2):

```bash ts file=../../../tests/tokens-multi-currency-support.test.mjs start=startWalletCreation end=endWalletCreation
```

```bash ts file=../../../tests/tokens-multi-currency-support.test.mjs start=startSaltWalletCreation end=endSaltWalletCreation
```

Create a new currency for Wallet 1 and withdraw it:

```bash file=../../../tests/tokens-multi-currency-support.test.mjs start=Eleventh end=Twelfth
```

Create a new currency for Wallet 2 and keep it in the minter:

```bash file=../../../tests/tokens-multi-currency-support.test.mjs start=Thirteenth end=Fourteenth
```

Withdraw the second currency to Wallet 1:

```bash file=../../../tests/tokens-multi-currency-support.test.mjs start=Eighteenth end=Nineteenth
```

Check the currencies for Wallet 1:

```bash file=../../../tests/tokens-multi-currency-support.test.mjs start=Fifteenth end=Sixteenth
```

The following response should appear:

```bash
Contract currencies:
Balance: 50000 CurrencyId=[CURRENCY_ID_ONE]
Balance: 15000 CurrencyId=[CURRENCY_ID_TWO]
```

Check the balance of Wallet 1 in default tokens:

```bash
nil contract balance WALLET_ONE_ADDRESS
```

```bash
Contract balance: BALANCE
```

### Via the client library

Create two new wallets:

```ts showLineNumbers file=../../../tests/tokens-multi-currency-support.test.mjs start=Twentieth end=Twentyfirst
```

Create a new currency for Wallet 1 and withdraw it:

```ts showLineNumbers file=../../../tests/tokens-multi-currency-support.test.mjs start=Twentysecond end=Twentythird
```

Create a new currency for Wallet 2 and send it to Wallet 1:

```ts showLineNumbers file=../../../tests/tokens-multi-currency-support.test.mjs start=Twentyfourth end=Twentyfifth
```

Check the currencies for Wallet 1:

```ts showLineNumbers file=../../../tests/tokens-multi-currency-support.test.mjs start=Twentysixth end=Twentyseventh
```